<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Brainrot Upgrade ‚Äî Halloween Update</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #fdfaf5;
      --accent: #d35400;
      --rare: #4b9cd3;
      --legendary: #f39c12;
      --mythic: #9b59b6;
      --secret: #2c3e50;
      --mutated: #e74c3c;
      --taco: #d35400;
      --halloween: #e67e22;
      --btn-main: linear-gradient(to right, #ffb347, #ffcc33);
      --btn-alt: linear-gradient(to right, #a29bfe, #6c5ce7);
      --btn-green: linear-gradient(to right, #55efc4, #00b894);
      --btn-orange: linear-gradient(to right, #fab1a0, #e17055);
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: #333;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: #1a1a1a;
      color: #fff;
      font-size: 36px;
      font-weight: bold;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeOut 1s ease 2s forwards;
    }

    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }

    h1 {
      font-size: 42px;
      color: var(--accent);
      margin: 20px 0 0;
      text-shadow: 2px 2px #f5cba7;
    }

    #subtitle {
      font-size: 20px;
      color: #e67e22;
      margin-bottom: 20px;
      letter-spacing: 1px;
      font-weight: bold;
    }

    #balance {
      font-size: 22px;
      font-weight: bold;
      color: #27ae60;
      margin-bottom: 10px;
    }

    #rebirth-button {
      background: var(--btn-alt);
      color: white;
      font-size: 16px;
      padding: 10px 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    #rebirth-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 12px rgba(108,92,231,0.4);
    }

    #event-timers {
      font-size: 14px;
      color: #c0392b;
      margin: 10px 0;
    }

    #active-events {
      font-size: 15px;
      margin-bottom: 10px;
      color: #c0392b;
    }

    #slot-count {
      font-weight: bold;
      color: var(--accent);
    }

    #base {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      padding: 10px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .slot {
      background: white;
      border: 2px solid #ccc;
      border-radius: 14px;
      padding: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      font-size: 15px;
      transition: transform 0.3s ease;
    }

    .slot:hover {
      transform: scale(1.03);
    }

    .common { border-color: #aaa; background: linear-gradient(to bottom, #fff, #f7f7f7); }
    .rare { border-color: var(--rare); background: linear-gradient(to bottom, #eaf4ff, #d6eaff); }
    .legendary { border-color: var(--legendary); background: linear-gradient(to bottom, #fff5d6, #ffe9a8); }
    .mythic { border-color: var(--mythic); background: linear-gradient(to bottom, #f3e6ff, #e0cfff); }
    .secret { border-color: var(--secret); background: linear-gradient(to bottom, #fdfdfd, #eaeaea); }

    .mutated { box-shadow: 0 0 12px rgba(231,76,60,0.4); }
    .taco { box-shadow: 0 0 12px rgba(211,84,0,0.3); }
    .halloween { box-shadow: 0 0 12px rgba(230,126,34,0.4); }

    .slot button {
      margin-top: 8px;
      padding: 8px 12px;
      font-size: 14px;
      background: var(--btn-main);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }

    .slot button:hover {
      transform: scale(1.05);
    }

    #conveyor {
      position: relative;
      height: 260px;
      overflow: hidden;
      background: linear-gradient(to right, #fdf6f0, #f7e9d7);
      border-top: 3px dashed #ccc;
      border-bottom: 3px dashed #ccc;
      margin: 20px 0;
    }

    .unit {
      position: absolute;
      top: 20px;
      width: 300px;
      animation: driveAcross 5s linear forwards;
      border: 2px solid #ccc;
      padding: 12px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }

    .unit:hover {
      transform: scale(1.05);
    }

    @keyframes driveAcross {
      0% { left: -320px; opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { left: 100vw; opacity: 0; }
    }

    #message-log {
      margin-top: 20px;
      font-size: 16px;
      color: #2c3e50;
    }
  </style>
</head>
<body>

<!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
<div id="loading-screen">
  <div>BRAINROT UPGRADE üéÉ</div>
  <div style="margin-top: 10px;">LOADING...</div>
</div>

<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<h1>BRAINROT UPGRADE</h1>
<div id="subtitle">HALLOWEEN UPDATE üéÉ</div>
<div id="balance">–ë–∞–ª–∞–Ω—Å: ‚ÇΩ0</div>
<button id="rebirth-button" onclick="showRebirthPopup()">üîÅ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</button>

<div id="event-timers">
  <div id="timebrainrot-timer"></div>
  <div id="event-timer"></div>
  <div id="taco-timer"></div>
  <div id="halloween-timer"></div>
</div>

<div id="active-events">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: ‚Äî</div>

<h2>üöÄ –ë–∞–∑–∞ (<span id="slot-count">8</span> —Å–ª–æ—Ç–æ–≤)</h2>
<div id="base"></div>

<h2>‚öôÔ∏è –ö–æ–Ω–≤–µ–π–µ—Ä</h2>
<div id="conveyor"></div>

<div id="message-log"></div>

<!-- Popup –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∏ -->
<div id="sell-confirm-overlay" style="display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.6);
  z-index:9998;"></div>

<div id="sell-confirm-popup" style="display:none;
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:#fff;
  padding:30px;
  border-radius:16px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  z-index:9999;
  max-width:400px;
  text-align:center;">
  <h3>‚ùó –í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å –±—Ä–µ–π–Ω—Ä–æ—Ç–∞?</h3>
  <div id="sell-unit-name" style="font-size:20px; font-weight:bold; margin:10px 0;"></div>
  <button style="background:var(--btn-orange);" onclick="confirmSell()">‚úÖ –ü—Ä–æ–¥–∞—Ç—å</button>
  <button style="background:var(--btn-green);" onclick="cancelSell()">‚ùå –û—Ç–º–µ–Ω–∞</button>
</div>

<!-- –ê–¥–º–∏–Ω–∫–∞ -->
<h2>üõ† –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
<div id="admin-panel">
  <input type="password" id="admin-password" placeholder="–ü–∞—Ä–æ–ª—å" style="padding:6px; border-radius:6px;">
  <button style="background:var(--btn-green);" onclick="unlockAdmin()">–í–æ–π—Ç–∏</button>
  <div id="admin-controls" style="display:none;">
    <div class="admin-section">
      <h3>üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞</h3>
      <button onclick="giveMoney()">–í—ã–¥–∞—Ç—å ‚ÇΩ5000</button>
      <button onclick="tryRebirth()">–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</button>
    </div>
    <div class="admin-section">
      <h3>üî• –°–æ–±—ã—Ç–∏—è</h3>
      <button onclick="startFireEvent()">–ó–∞–ø—É—Å—Ç–∏—Ç—å Fire</button>
      <button onclick="startTimeBrainrotEvent()">–ó–∞–ø—É—Å—Ç–∏—Ç—å Time Brainrot</button>
      <button onclick="startTacoEvent()">–ó–∞–ø—É—Å—Ç–∏—Ç—å Taco</button>
      <button onclick="startHalloweenEvent()">–ó–∞–ø—É—Å—Ç–∏—Ç—å Halloween</button>
    </div>
    <div class="admin-section">
      <h3>üé≤ –°–ø–∞–≤–Ω —é–Ω–∏—Ç–∞</h3>
      <button onclick="rollConveyorUnit()">–°–ª—É—á–∞–π–Ω—ã–π —é–Ω–∏—Ç</button>
      <select id="custom-unit-name">
        <option>Br Br Patapim</option>
        <option>Bandito Bobrito</option>
        <option>Bombandiro Crocodilo</option>
        <option>Cocofanto Elefanto</option>
        <option>Te Te Te Sahur</option>
        <option>Tralalelo Tralala</option>
        <option>Matteo</option>
        <option>Mythico Dragono</option>
        <option>Tung Tung Sahur</option>
        <option>Zebra Tacos</option>
        <option>Lili Larira</option>
        <option>Tripi Tropa</option>
        <option>Svinino Bombandiro</option>
        <option>Orcalelo Orcala</option>
        <option>Barelina Capuchina</option>
        <option>Los Tungtungtunos</option>
        <option>Los Combinasion</option>
        <option>Skeletini Fright</option>
        <option>Spaghetti Toileti</option>
      </select><br>
      <label><input type="checkbox" id="mutate-fire"> üî• Fire</label>
      <label><input type="checkbox" id="mutate-taco"> üåÆ Taco</label>
      <label><input type="checkbox" id="mutate-halloween"> üéÉ Halloween</label><br>
      <button onclick="spawnCustomUnit()">–°–ø–∞–≤–Ω –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ</button>
    </div>
    <div class="admin-section">
      <h3>üß™ –û—Ç–ª–∞–¥–∫–∞</h3>
      <button onclick="clearSave()">–û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</button>
      <button onclick="forceSlot()">+1 —Å–ª–æ—Ç –≤—Ä—É—á–Ω—É—é</button>
      <button onclick="forceBoost()">√ó1.5 –±–æ–Ω—É—Å –Ω–∞ 60 —Å–µ–∫</button>
    </div>
  </div>
    </div>
    <script>
let balance = 200;
let baseSlots = Array(8).fill(null);
let rebirthLevel = 0;
let conveyorBusy = false;
let currentUnit = null;
let pendingSellIndex = null;
let tacoSpawnCounter = 0;
let fireActive = false;
let timeBrainrotActive = false;
let tacoActive = false;
let halloweenActive = false;
let halloweenCountdown = 1800;
let halloweenRemaining = 0;

const units = {
  "Br Br Patapim": { income: 10, cost: 100, chance: 0.30, rarity: "common" },
  "Bandito Bobrito": { income: 25, cost: 2700, chance: 0.12, rarity: "rare" },
  "Bombandiro Crocodilo": { income: 20, cost: 700, chance: 0.018, rarity: "rare" },
  "Cocofanto Elefanto": { income: 50, cost: 4000, chance: 0.06, rarity: "legendary" },
  "Te Te Te Sahur": { income: 40, cost: 3000, chance: 0.06, rarity: "rare" },
  "Tralalelo Tralala": { income: 500, cost: 150000, chance: 0.02, rarity: "legendary" },
  "Matteo": { income: 120, cost: 20000, chance: 0.03, rarity: "legendary" },
  "Mythico Dragono": { income: 100, cost: 15000, chance: 0.04, rarity: "mythic" },
  "Tung Tung Sahur": { income: 2000, cost: 1200000, chance: 0.01, rarity: "mythic" },
  "Zebra Tacos": { income: 60, cost: 5000, chance: 0.04, rarity: "rare" },
  "Lili Larira": { income: 20, cost: 500, chance: 0.08, rarity: "common" },
  "Tripi Tropa": { income: 25, cost: 800, chance: 0.07, rarity: "common" },
  "Svinino Bombandiro": { income: 30, cost: 1200, chance: 0.06, rarity: "rare" },
  "Orcalelo Orcala": { income: 300, cost: 50000, chance: 0.015, rarity: "legendary" },
  "Barelina Capuchina": { income: 300, cost: 50000, chance: 0.015, rarity: "legendary" },
  "Los Tungtungtunos": { income: 5000, cost: 500000, chance: 0.005, rarity: "secret" },
  "Los Combinasion": { income: 10000, cost: 1000000, chance: 0.002, rarity: "secret" },
  "Skeletini Fright": { income: 100, cost: 50000, chance: 0, rarity: "rare" },
  "Spaghetti Toileti": { income: 3000, cost: 3000000, chance: 0.1, rarity: "secret" }
};

function rollConveyorUnit() {
  if (conveyorBusy) return;
  conveyorBusy = true;

  let unit;
  tacoSpawnCounter++;

  if (halloweenActive && Math.random() < 0.01) {
    unit = {
      name: "Skeletini Fright",
      income: 100,
      cost: 50000,
      rarity: "rare",
      stash: 0
    };
  } else if (tacoActive && tacoSpawnCounter % 3 === 0) {
    unit = {
      name: "Zebra Tacos",
      income: 60,
      cost: 5000,
      rarity: "rare",
      stash: 0,
      tacoMutated: true
    };
  } else {
    let roll = Math.random();
    let cumulative = 0;
    for (let name in units) {
      const u = units[name];
      cumulative += u.chance;
      if (roll <= cumulative) {
        unit = { name, ...u, stash: 0 };
        break;
      }
    }
    if (!unit) unit = { name: "Br Br Patapim", ...units["Br Br Patapim"], stash: 0 };
    if (fireActive && Math.random() < 0.8) {
      unit.income *= 2;
      unit.fireMutated = true;
    }
    if (tacoActive && Math.random() < 0.5) {
      unit.income *= 2;
      unit.tacoMutated = true;
    }
    if (halloweenActive && Math.random() < 0.2) {
      unit.income *= 3;
      unit.halloweenMutated = true;
    }
  }

  renderConveyorUnit(unit);
}

function renderConveyorUnit(unit) {
  currentUnit = unit;
  const conveyorDiv = document.getElementById("conveyor");
  conveyorDiv.innerHTML = "";
  const div = document.createElement("div");
  div.className = `unit ${unit.rarity}`;
  if (unit.fireMutated) div.classList.add("mutated");
  if (unit.tacoMutated) div.classList.add("taco");
  if (unit.halloweenMutated) div.classList.add("halloween");

  let tags = "";
  if (unit.fireMutated) tags += "üî• Fire ";
  if (unit.tacoMutated) tags += "üåÆ Taco ";
  if (unit.halloweenMutated) tags += "üéÉ Halloween ";

  div.innerHTML = `<strong>${unit.name} ${tags}</strong><br>
    ‚ÇΩ${unit.income}/—Å–µ–∫<br>–¶–µ–Ω–∞: ‚ÇΩ${unit.cost}<br>
    <button onclick='buyUnit()'>–ö—É–ø–∏—Ç—å</button>`;
  conveyorDiv.appendChild(div);

  setTimeout(() => {
    if (conveyorDiv.contains(div)) {
      conveyorDiv.innerHTML = "";
      conveyorBusy = false;
      rollConveyorUnit();
    }
  }, 5000);
}

function buyUnit() {
  const unit = currentUnit;
  if (!unit) return;

  const emptyIndex = baseSlots.findIndex(slot => slot === null);
  if (emptyIndex === -1) return alert("–ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤!");
  if (balance < unit.cost) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");

  balance -= unit.cost;
  baseSlots[emptyIndex] = unit;
  updateBalanceDisplay();
  updateBaseDisplay();
  updateSlotCount();
  saveGame();

  document.getElementById("conveyor").innerHTML = "";
  conveyorBusy = false;
  currentUnit = null;

  showMessage(`‚úÖ –ö—É–ø–ª–µ–Ω –±—Ä–µ–π–Ω—Ä–æ—Ç: ${unit.name}`);
  rollConveyorUnit();
}

function sellUnit(index) {
  const unit = baseSlots[index];
  if (!unit) return;
  pendingSellIndex = index;
  document.getElementById("sell-unit-name").innerText = unit.name;
  document.getElementById("sell-confirm-popup").style.display = "block";
  document.getElementById("sell-confirm-overlay").style.display = "block";
}

function confirmSell() {
  const index = pendingSellIndex;
  const unit = baseSlots[index];
  if (unit) {
    balance += unit.cost;
    baseSlots[index] = null;
    updateBalanceDisplay();
    updateBaseDisplay();
    saveGame();
    showMessage(`‚ùå –ü—Ä–æ–¥–∞–Ω –±—Ä–µ–π–Ω—Ä–æ—Ç: ${unit.name}`);
  }
  cancelSell();
}

function cancelSell() {
  pendingSellIndex = null;
  document.getElementById("sell-confirm-popup").style.display = "none";
  document.getElementById("sell-confirm-overlay").style.display = "none";
}
    </script>
  <script>
let fireCountdown = 150;
let fireRemaining = 0;
let timeBrainrotCountdown = 300;
let timeBrainrotRemaining = 0;
let tacoCountdown = 900;
let tacoRemaining = 0;

function updateBalanceDisplay() {
  document.getElementById("balance").innerText = `–ë–∞–ª–∞–Ω—Å: ‚ÇΩ${Math.floor(balance)}`;
}

function updateSlotCount() {
  document.getElementById("slot-count").innerText = baseSlots.length;
}

function updateBaseDisplay() {
  const baseDiv = document.getElementById("base");
  baseDiv.innerHTML = "";
  baseSlots.forEach((unit, i) => {
    const div = document.createElement("div");
    div.className = `slot ${unit?.rarity || ""}`;
    if (unit) {
      if (unit.fireMutated) div.classList.add("mutated");
      if (unit.tacoMutated) div.classList.add("taco");
      if (unit.halloweenMutated) div.classList.add("halloween");

      let tags = "";
      if (unit.fireMutated) tags += "üî• ";
      if (unit.tacoMutated) tags += "üåÆ ";
      if (unit.halloweenMutated) tags += "üéÉ ";

      let multiplier = timeBrainrotActive ? 1.5 : 1;
      let incomeDisplay = `‚ÇΩ${Math.floor(unit.income * multiplier)}/—Å–µ–∫`;
      let bonusText = timeBrainrotActive ? "<span style='color:#27ae60;'>√ó1.5 –±–æ–Ω—É—Å</span><br>" : "";

      div.innerHTML = `<strong>${unit.name} ${tags}</strong><br>
        ${bonusText}${incomeDisplay}<br>
        –ö–æ–ø–∏–ª–∫–∞: ‚ÇΩ${Math.floor(unit.stash || 0)}<br>
        <button onclick="collect(${i})">–ó–∞–±—Ä–∞—Ç—å</button><br>
        <button onclick="sellUnit(${i})">–ü—Ä–æ–¥–∞—Ç—å</button>`;
    } else {
      div.innerText = "–ü—É—Å—Ç–æ";
    }
    baseDiv.appendChild(div);
  });
}

function collect(index) {
  const unit = baseSlots[index];
  if (unit && unit.stash > 0) {
    balance += unit.stash;
    unit.stash = 0;
    updateBalanceDisplay();
    updateBaseDisplay();
    saveGame();
  }
}

setInterval(() => {
  baseSlots.forEach(unit => {
    if (unit) {
      const multiplier = timeBrainrotActive ? 1.5 : 1;
      unit.stash = (unit.stash || 0) + unit.income * multiplier;
    }
  });
  updateBaseDisplay();
}, 1000);

setInterval(() => {
  fireCountdown--;
  timeBrainrotCountdown--;
  tacoCountdown--;
  halloweenCountdown--;

  if (fireCountdown <= 0 && !fireActive) {
    startFireEvent();
    fireCountdown = 150;
  }
  if (timeBrainrotCountdown <= 0 && !timeBrainrotActive) {
    startTimeBrainrotEvent();
    timeBrainrotCountdown = 300;
  }
  if (tacoCountdown <= 0 && !tacoActive) {
    startTacoEvent();
    tacoCountdown = 900;
  }
  if (halloweenCountdown <= 0 && !halloweenActive) {
    startHalloweenEvent();
    halloweenCountdown = 1800;
  }

  if (fireActive && --fireRemaining <= 0) fireActive = false;
  if (timeBrainrotActive && --timeBrainrotRemaining <= 0) timeBrainrotActive = false;
  if (tacoActive && --tacoRemaining <= 0) tacoActive = false;
  if (halloweenActive && --halloweenRemaining <= 0) halloweenActive = false;

  updateEventTimer();
  updateTimeBrainrotTimer();
  updateTacoTimer();
  updateHalloweenTimer();
  updateActiveEventsDisplay();
}, 1000);

function updateEventTimer() {
  document.getElementById("event-timer").innerText = fireActive
    ? `üî• Fire Event –∞–∫—Ç–∏–≤–µ–Ω (${fireRemaining} —Å–µ–∫)`
    : `–°–ª–µ–¥—É—é—â–∏–π Fire Event —á–µ—Ä–µ–∑: ${fireCountdown} —Å–µ–∫`;
}

function updateTimeBrainrotTimer() {
  document.getElementById("timebrainrot-timer").innerText = timeBrainrotActive
    ? `üß† Time Brainrot –∞–∫—Ç–∏–≤–µ–Ω (${timeBrainrotRemaining} —Å–µ–∫)`
    : `–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ Time Brainrot Event: ${timeBrainrotCountdown} —Å–µ–∫`;
}

function updateTacoTimer() {
  document.getElementById("taco-timer").innerText = tacoActive
    ? `üåÆ Taco Event –∞–∫—Ç–∏–≤–µ–Ω (${tacoRemaining} —Å–µ–∫)`
    : `–°–ª–µ–¥—É—é—â–∏–π Taco Event —á–µ—Ä–µ–∑: ${tacoCountdown} —Å–µ–∫`;
}

function updateHalloweenTimer() {
  document.getElementById("halloween-timer").innerText = halloweenActive
    ? `üéÉ Halloween Event –∞–∫—Ç–∏–≤–µ–Ω (${halloweenRemaining} —Å–µ–∫)`
    : `–°–ª–µ–¥—É—é—â–∏–π Halloween Event —á–µ—Ä–µ–∑: ${halloweenCountdown} —Å–µ–∫`;
}

function updateActiveEventsDisplay() {
  const el = document.getElementById("active-events");
  let active = [];
  if (fireActive) active.push("üî• Fire");
  if (timeBrainrotActive) active.push("üß† Time Brainrot");
  if (tacoActive) active.push("üåÆ Taco");
  if (halloweenActive) active.push("üéÉ Halloween");
  el.innerText = "–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: " + (active.length ? active.join(", ") : "‚Äî");
}

function showFullscreenEvent(text) {
  const screen = document.getElementById("fullscreen-event");
  if (!screen) {
    const div = document.createElement("div");
    div.id = "fullscreen-event";
    div.style = "position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);color:#fff;font-size:48px;font-weight:bold;display:flex;align-items:center;justify-content:center;z-index:9999;";
    div.innerText = text;
    document.body.appendChild(div);
    setTimeout(() => div.remove(), 2000);
  } else {
    screen.innerText = text;
    screen.style.display = "flex";
    setTimeout(() => {
      screen.style.display = "none";
    }, 2000);
  }
}

function saveGame() {
  localStorage.setItem("brainrotSave", JSON.stringify({
    balance,
    baseSlots,
    rebirthLevel
  }));
}

function loadGame() {
  const save = localStorage.getItem("brainrotSave");
  if (save) {
    const data = JSON.parse(save);
    balance = data.balance || 200;
    baseSlots = data.baseSlots || Array(8).fill(null);
    rebirthLevel = data.rebirthLevel || 0;
  }
}
  </script>
<script>
function startFireEvent() {
  fireActive = true;
  fireRemaining = 20;
  showFullscreenEvent("üî• Fire Event!");
}

function startTimeBrainrotEvent() {
  timeBrainrotActive = true;
  timeBrainrotRemaining = 30;
  showFullscreenEvent("üß† Time Brainrot!");
}

function startTacoEvent() {
  tacoActive = true;
  tacoRemaining = 60;
  tacoSpawnCounter = 0;
  showFullscreenEvent("üåÆ Loren –ª—é–±–∏—Ç Taco!");
}

function startHalloweenEvent() {
  halloweenActive = true;
  halloweenRemaining = 45;
  showFullscreenEvent("üéÉ Halloween Event!");
}

function spawnCustomUnit() {
  const name = document.getElementById("custom-unit-name").value;
  const fire = document.getElementById("mutate-fire").checked;
  const taco = document.getElementById("mutate-taco").checked;
  const halloween = document.getElementById("mutate-halloween").checked;
  const u = units[name];
  if (!u) return alert("–Æ–Ω–∏—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω");

  const unit = {
    name,
    income: u.income,
    cost: u.cost,
    rarity: u.rarity,
    stash: 0,
    fireMutated: fire,
    tacoMutated: taco,
    halloweenMutated: halloween
  };
  if (fire) unit.income *= 2;
  if (taco) unit.income *= 2;
  if (halloween) unit.income *= 3;

  renderConveyorUnit(unit);
}

function unlockAdmin() {
  const input = document.getElementById("admin-password").value;
  if (input === "brainrot0192") {
    document.getElementById("admin-controls").style.display = "block";
    showMessage("üîì –ê–¥–º–∏–Ω–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞");
  } else {
    alert("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å");
  }
}

function clearSave() {
  localStorage.removeItem("brainrotSave");
  alert("üßπ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—á–∏—â–µ–Ω–æ. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
}

function forceSlot() {
  baseSlots.push(null);
  updateSlotCount();
  updateBaseDisplay();
  saveGame();
}

function forceBoost() {
  timeBrainrotActive = true;
  timeBrainrotRemaining = 60;
  showFullscreenEvent("‚ö° –ë–æ–Ω—É—Å √ó1.5 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!");
}

function showMessage(text) {
  const log = document.getElementById("message-log");
  log.innerText = text;
  setTimeout(() => {
    log.innerText = "";
  }, 4000);
}

function tryRebirth() {
  if (rebirthLevel === 0) {
    let hasBandito = baseSlots.some(u => u?.name === "Bandito Bobrito");
    let hasBombandiro = baseSlots.some(u => u?.name === "Bombandiro Crocodilo");
    if (balance >= 25000 && hasBandito && hasBombandiro) {
      performRebirth(1, 500);
    } else {
      alert("‚ùå –£—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:\n‚Ä¢ 25‚ÄØ000‚ÇΩ\n‚Ä¢ Bandito Bobrito\n‚Ä¢ Bombandiro Crocodilo");
    }
  } else if (rebirthLevel === 1) {
    let hasCocofanto = baseSlots.some(u => u?.name === "Cocofanto Elefanto");
    let hasZebra = baseSlots.some(u => u?.name === "Zebra Tacos");
    if (balance >= 100000 && hasCocofanto && hasZebra) {
      performRebirth(2, 2000);
    } else {
      alert("‚ùå –£—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:\n‚Ä¢ 100‚ÄØ000‚ÇΩ\n‚Ä¢ Cocofanto Elefanto\n‚Ä¢ Zebra Tacos");
    }
  } else {
    alert("üîí –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ—Å—Ç–∏–≥–Ω—É—Ç.");
  }
}

function performRebirth(nextLevel, reward) {
  rebirthLevel = nextLevel;
  balance = reward;
  baseSlots = Array(baseSlots.length + 1).fill(null);
  updateBalanceDisplay();
  updateBaseDisplay();
  updateSlotCount();
  saveGame();
  showFullscreenEvent(`üîÅ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ ${nextLevel} –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!`);
}

// –∑–∞–ø—É—Å–∫
loadGame();
updateBalanceDisplay();
updateBaseDisplay();
updateSlotCount();
updateEventTimer();
updateTimeBrainrotTimer();
updateTacoTimer();
updateHalloweenTimer();
updateActiveEventsDisplay();
rollConveyorUnit();

// —Å–∫—Ä—ã—Ç–∏–µ –∑–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
setTimeout(() => {
  document.getElementById("loading-screen").style.display = "none";
}, 3000);
</script>
</body>
</html>
